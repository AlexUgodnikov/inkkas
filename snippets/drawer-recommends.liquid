
{%- assign product_form_id = 'quick-add-'
	| append: section.id
	| append: product_card_product.id
-%}
<div class="drawer-recommend-product">
    <div class="drawer-recommend-img">
        <a 
        href="{{ product_card_product.url | default: '#' }}">
            {{
											product_card_product.featured_media.preview_image
											| image_url: width: 200
											| image_tag:
												loading: 'lazy',
												width: product_card_product.featured_media.preview_image.width,
												height: image_height,
												sizes: '200px',
												widths: '375, 550'
										}}
        </a>
    </div>
    <div class="drawer-recommend-info">
        {% if product_card_product.title != blank %}
					<h3 class="card__title">
						<a
							class="unstyled-link"
							href="{{ product_card_product.url | default: '#' }}"
							title="{{ product_card_product.title | escape }}"
						>
							{{ product_card_product.title | escape -}}
						</a>
					</h3>
				{% else %}
					<h3 class="card__title h5 small-font">
						{{ 'products.product.product_heading' | t }}
					</h3>
				{% endif %}
				{% render 'price', product: product_card_product, price_class: '' %}
                
        <product-form class="card__add-to-cart card__button">
            {%- form 'product',
                product_card_product,
                id: product_form_id,
                class: 'form',
                novalidate: 'novalidate',
                data-type: 'add-to-cart-form'
            -%}
                <input
                    type="hidden"
                    name="id"
                    value="{{ product_card_product.selected_or_first_available_variant.id }}"
                    disabled
                >
                <button
                    id="{{ product_form_id }}-submit"
                    type="submit"
                    class="card__link button button--{{ settings.quickview_button_style }} button--small card__link--{{ settings.quickview_button_layout }} card-focused {% if settings.quickview_button_style == 'link' %} button--primary{% endif %}"
                    name="add" 
                    aria-haspopup="dialog"
                    aria-labelledby="{{ product_form_id }}-submit title-{{ section_id }}-{{ product_card_product.id }}"
                    aria-live="polite"
                    aria-label="quick-add"
                    data-sold-out-message="true"
                    {% if product_card_product.selected_or_first_available_variant.available
                            == false
                    %}
                        disabled
                    {% endif %}
                >
                    {% if settings.quickview_button_style == 'link' %}
                        {% render 'icon-cart' %}
                    {% else %}
                        {% if settings.button_animation %}
                            <span class="animation-wrapper" hoverstagger="link">
                                <span class="card__quickview-text button-label is-1 animation" hoverstagger="text">
                                    <span class="word" id="word1">{{- 'general.card.quick__add' | t -}}</span>
                                </span>
                                <span class="card__quickview-text button-label is-2 animation" hoverstagger="text">
                                    <span class="word" id="word2">{{- 'general.card.quick__add' | t -}}</span>
                                </span>
                            </span>
                        {% else %}
                        <span class="card__quickview-text button-label">{{- 'general.card.quick__add' | t -}}</span>
                    {% endif %}
                
                    {% endif %}
                    <span class="sold-out-message hidden">
                        {{ 'products.product.sold_out' | t }}
                    </span>
                    <b class="loading-overlay__spinner hidden">
                        <svg
                            aria-hidden="true"
                            focusable="false"
                            role="presentation"
                            class="spinner"
                            viewBox="0 0 66 66"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                        </svg>
                    </b>
                </button>
            {%- endform -%}
        </product-form>
    </div>    
</div>