{%- liquid
	if sticky
		assign appended = '--sticky'
	endif

	assign handle = option.name | replace: ' ', '-' | downcase | escape
-%}
{% assign men = 0 %}
{% assign women = 0 %}
{% assign kids = 0 %}
{% assign eur = 0 %}
{%- for option in product.options_with_values -%}
	{%- for value in option.values -%}
		{% assign value_search = value | downcase  %}
		{% if value_search contains 'us men' %}
			{% assign men = men | plus: 1 %}
		{% endif %}
		{% if value_search contains 'us women' %}
			{% assign women = women | plus: 1 %}
		{% endif %}
		{% if value_search contains 'eur' %}
			{% assign eur = eur | plus: 1 %}
		{% endif %}
		{% if value_search contains 'us kids' %}
			{% assign kids = kids | plus: 1 %}
		{% endif %}
	{% endfor %}
{% endfor %}
{% assign active_tab = '' %}
{% assign count_tab = 0 %}
{% if women > 0 %}
	{% assign active_tab = 'women' %}
	{% assign count_tab = count_tab | plus: 1 %}
{% elsif  men > 0 %}
	{% assign active_tab = 'men' %}
	{% assign count_tab = count_tab | plus: 1 %}
{% elsif  kids > 0 %}
	{% assign active_tab = 'kids' %}
	{% assign count_tab = count_tab | plus: 1 %}
{% elsif  eur > 0 %}
	{% assign active_tab = 'eur' %}
	{% assign count_tab = count_tab | plus: 1 %}
{% endif %}
{%- case option_type -%}
{%- when 'dropdown' -%}
	<fieldset class="product-form__input product-form__input--dropdown" data-index="option{{ forloop.index }}" data-handle="{{ handle }}">
		<div class="form__label" for="Option-{{ section.id }}-{{ forloop.index0 }}{{ appended }}">
		  {{ option.name }}{{ sizing_link }}
		</div>
		<div class="select">
		  <select
				id="Option-{{ section.id }}-{{ forloop.index0 }}{{ appended }}"
				name="options[{{ option.name | escape | append: appended }}]"
				form="{{ product_form_id }}"
			>
		    {%- for value in option.values -%}
		      <option value="{{ value | escape }}" {% if option.selected_value == value %}selected="selected"{% endif %}>
		        {{ value }}
		      </option>
		    {%- endfor -%}
		  </select>
			<div class="select-arrow">{%- render 'svg-icons' with 'thb-select' -%}</div>
		</div>
	</fieldset>
{%- when 'button' -%}

		{% if count_tab > 0 %}
			<div class="form__label">
					<div class="tab_variants row_flex align-items-center">
						<div class="col-auto titles">{{ option.name }}:</div>
						{% if women > 0 %}
							<div class="col-auto danns {%  if active_tab == 'women' %} active {% endif %}" data-type="women" id="tab_type_women">US Women</div>
						{% endif %}
						{% if men > 0 %}
							<div class="col-auto danns {%  if active_tab == 'men' %} active {% endif %}" data-type="men" id="tab_type_men">US Men</div>
						{% endif %}
						{% if kids > 0 %}
							<div class="col-auto danns {%  if active_tab == 'kids' %} active {% endif %}" data-type="kids" id="tab_type_kids">US Kids</div>
						{% endif %}
						{% if eur > 0 %}
							<div class="col-auto danns {%  if active_tab == 'eur' %} active {% endif %}" data-type="eur" id="tab_type_eur">Eur</div>
						{% endif %}
					</div>
					{{ sizing_link }}
			</div>
			{% assign currentVariant = product.selected_or_first_available_variant %}

			{% if women > 0 %}
				<fieldset class="product-form__input product-form__input--block" data-index="option{{ forloop.index }}" data-handle="{{ handle }}">
					<div class="show_variants {%  if active_tab == 'women' %} active {% endif %}" id="women_type">
						{%- for value in option.values -%}
							{% assign value_search = value | downcase  %}
							 {% if value_search contains 'us women' %}
							 {% assign new_title_arr = value | split: "/" %}
							 {% assign new_title = value %}
							 {% for val in new_title_arr %}
								 {% assign newval = val | downcase %}
									 {% if newval contains 'us women' %}
										 {% assign new_title = val %}
									 {% endif %}
							 {% endfor %}
								 <input type="radio" id="{{ section.id }}-Size-Men-{{ option.position }}-{{ forloop.index0 }}{{ appended }}"
												name="{{ option.name | append: appended }}"
												value="{{ value | escape }}"
												form="{{ product_form_id }}"
												{% if option.selected_value == value %}checked{% endif %}
								 >
								 <label for="{{ section.id }}-Size-Men-{{ option.position }}-{{ forloop.index0 }}{{ appended }}">
									 <span>{{ new_title | split: ' ' | last }}</span>
								 </label>
							 {% endif %}
						{%- endfor -%}
					</div>
				</fieldset>
			{% endif %}
			{% if men > 0 %}
				<fieldset class="product-form__input product-form__input--block" data-index="option{{ forloop.index }}" data-handle="{{ handle }}">
					<div class="show_variants {%  if active_tab == 'men' %} active {% endif %}" id="men_type">
						{%- for value in option.values -%}
							{% assign value_search = value | downcase  %}
							{% if value_search contains 'us men' %}
								{% assign new_title_arr = value | split: "/" %}
								{% assign new_title = value %}
								{% for val in new_title_arr %}
									{% assign newval = val | downcase %}
									{% if newval contains 'us men' %}
										{% assign new_title = val %}
									{% endif %}
								{% endfor %}
								<input type="radio" id="{{ section.id }}-Size-Men-{{ option.position }}-{{ forloop.index0 }}{{ appended }}"
											 name="{{ option.name | append: appended }}"
											 value="{{ value | escape }}"
											 form="{{ product_form_id }}"
											 {% if option.selected_value == value %}checked{% endif %}
								>
								<label for="{{ section.id }}-Size-Men-{{ option.position }}-{{ forloop.index0 }}{{ appended }}">
									<span>{{ new_title | split: ' ' | last }}</span>
								</label>
							{% endif %}
						{%- endfor -%}
					</div>
				</fieldset>
			{% endif %}
			{% if kids > 0 %}
				<fieldset class="product-form__input product-form__input--block" data-index="option{{ forloop.index }}" data-handle="{{ handle }}">
					<div class="show_variants {%  if active_tab == 'kids' %} active {% endif %}" id="kids_type">
						{%- for value in option.values -%}
							{% assign value_search = variant.title | downcase  %}
							{% if value_search contains 'us kids' %}
								{% assign new_title_arr = variant.title | split: " / " %}
								{% assign new_title = variant.title %}
								{% for val in new_title_arr %}
									{% assign newval = val | downcase %}
									{% if newval contains 'us kids' %}
										{% assign new_title = val %}
									{% endif %}
								{% endfor %}
								<input type="radio" id="{{ section.id }}-Size-Kids-{{ option.position }}-{{ forloop.index0 }}{{ appended }}"
											 name="{{ option.name | append: appended }}"
											 value="{{ value | escape }}"
											 form="{{ product_form_id }}"
											 {% if option.selected_value == value %}checked{% endif %}
								>
								<label for="{{ section.id }}-Size-Kids-{{ option.position }}-{{ forloop.index0 }}{{ appended }}">
									<span>{{ new_title }}</span>
								</label>
							{% endif %}
						{%- endfor -%}
					</div>
				</fieldset>
			{% endif %}
			{% if eur > 0 %}
				<fieldset class="product-form__input product-form__input--block" data-index="option{{ forloop.index }}" data-handle="{{ handle }}">
					<div class="show_variants  {%  if active_tab == 'eur' %} active {% endif %}" id="eur_type">
						{%- for value in option.values -%}
							{% assign value_search = variant.title | downcase  %}
							{% if value_search contains 'eur' %}
								{% assign new_title_arr = variant.title | split: " / " %}
								{% assign new_title = variant.title %}
								{% for val in new_title_arr %}
									{% assign newval = val | downcase %}
									{% if newval contains 'eur' %}
										{% assign new_title = val %}
									{% endif %}
								{% endfor %}
								<input type="radio" id="{{ section.id }}-Size-Eur-{{ option.position }}-{{ forloop.index0 }}{{ appended }}"
											 name="{{ option.name | append: appended }}"
											 value="{{ value | escape }}"
											 form="{{ product_form_id }}"
											 {% if option.selected_value == value %}checked{% endif %}
								>
								<label for="{{ section.id }}-Size-Eur-{{ option.position }}-{{ forloop.index0 }}{{ appended }}">
									<span>{{ new_title | split: ' ' | last }}</span>
								</label>
							{% endif %}
						{%- endfor -%}
					</div>
				</fieldset>
			{% endif %}
		{% else %}
			<fieldset class="product-form__input product-form__input--block" data-index="option{{ forloop.index }}" data-handle="{{ handle }}">
				<div class="form__label">
					{{ option.name }}: <span class="form__label__value">{{ option.selected_value }}</span>{{ sizing_link }}
				</div>
				{%- for value in option.values -%}
					<input type="radio" id="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}{{ appended }}"
								 name="{{ option.name | append: appended }}"
								 value="{{ value | escape }}"
								 form="{{ product_form_id }}"
								 {% if option.selected_value == value %}checked{% endif %}
					>
					<label for="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}{{ appended }}">
						<span>{{ value }}</span>
					</label>
				{%- endfor -%}
			</fieldset>
		{% endif %}
{%- when 'color' -%}
	{%- liquid
		assign custom_colors = settings.color_swatches | newline_to_br | split: '<br />'
		assign key_array = ''
		assign val_array = ''

		for color in custom_colors
			assign key = color | split: ':' | first | rstrip
			assign value = color | split: ':' | last | lstrip
			assign key_array = key_array | append: ',' | append: key
			assign val_array = val_array | append: ',' | append: value
		endfor

		assign key_array = key_array | remove_first: ',' | strip_newlines | downcase | split: ','
		assign val_array = val_array | remove_first: ',' | split: ','

		assign variant_image_size = '40'
		case color_picker_size
			when 'large'
				assign variant_image_size = '72'
			when 'xlarge'
				assign variant_image_size = '104'
		endcase
	-%}
	<fieldset class="product-form__input product-form__input--color product-form__input--color--{{ color_picker_size }}" data-use-images="{{ color_picker_use_variants }}" data-index="option{{ forloop.index }}" data-handle="{{ handle }}">
		<div class="form__label">{{ option.name }}: <span class="form__label__value">{{ option.selected_value }}</span></div>
		{%- for value in option.values -%}
			<input type="radio" id="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}{{ appended }}"
						name="{{ option.name | append: appended }}"
						value="{{ value | escape }}"
						form="{{ product_form_id }}"
						{% if option.selected_value == value %}checked{% endif %}
			>
			{%- liquid
				assign color_value = value | downcase | escape

				for custom_color in key_array
					if custom_color == color_value
						assign color_value = val_array[forloop.index0]
					endif
				endfor

				assign bg_value = empty
				if color_value contains '.'
					assign bg_value = color_value | file_url
					assign color_value = 'var(--bg-body)'
				endif

				if color_picker_use_variants
					assign variant_image = blank

					for variant in product.variants
						if variant.title contains value
							if variant.image
								assign bg_value = variant.image | image_url: width: variant_image_size
								break
							endif
						endif
					endfor
				endif

				if value.swatch.image
					assign bg_value = value.swatch.image | image_url: width: variant_image_size
					assign swatch_focal_point = value.swatch.image.presentation.focal_point
				elsif value.swatch.color
					assign color_value = 'rgb(' | append: value.swatch.color.rgb | append: ')'
				endif
			-%}
			<label for="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}{{ appended }}" style="--option-color: {{ color_value | downcase | escape }}; {%- if bg_value -%} --option-color-image: url('{{ bg_value | escape }}');{%- endif -%}">
				{{ value }}
			</label>
		{%- endfor -%}
	</fieldset>
{%- endcase -%}
